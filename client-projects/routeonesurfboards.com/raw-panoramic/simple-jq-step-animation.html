<!doctype html>
<html>
<head>
	<title>Simple Animation Step</title>
	<style>
		.box {
			position:absolute;
			left:0;
			top:0;
			width:100px;
			height:100px;
			background:red;
			text-indent:0;
		}
		button {
			display:inline-block;
			margin-right:10px;
			margin-top:125px;
		}
		.dot {
			background:red;
			width:10px;
			height:10px;
			border-radius:50%;
		}
		#container {
			position:relative;
			width:100%;
			height:400px;
		}
	</style>
</head>
<body>
	<!--div class="box"></div-->
	<button id="start">Start</button>
	<button id="pause">Pause</button>
	<button id="resume">Resume</button>
	<div id="container"></div>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script>

	//requestAnimationFrame polyfill
	/*	(function() {
		    var lastTime = 0;
		    var vendors = ['ms', 'moz', 'webkit', 'o'];
		    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
		        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
		        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']
		                                   || window[vendors[x]+'CancelRequestAnimationFrame'];
		    }
		 
		    if (!window.requestAnimationFrame)
		        window.requestAnimationFrame = function(callback, element) {
		            var currTime = new Date().getTime();
		            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
		            var id = window.setTimeout(function() { callback(currTime + timeToCall); },
		              timeToCall);
		            lastTime = currTime + timeToCall;
		            return id;
		        };
		 
		    if (!window.cancelAnimationFrame)
		        window.cancelAnimationFrame = function(id) {
		            clearTimeout(id);
		        };
			}());
		
		//easing functions
		var easing = {
		  // no easing, no acceleration
		  linear: function (t) { return t },
		  // accelerating from zero velocity
		  easeInQuad: function (t) { return t*t },
		  // decelerating to zero velocity
		  easeOutQuad: function (t) { return t*(2-t) },
		  // acceleration until halfway, then deceleration
		  easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },
		  // accelerating from zero velocity 
		  easeInCubic: function (t) { return t*t*t },
		  // decelerating to zero velocity 
		  easeOutCubic: function (t) { return (--t)*t*t+1 },
		  // acceleration until halfway, then deceleration 
		  easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },
		  // accelerating from zero velocity 
		  easeInQuart: function (t) { return t*t*t*t },
		  // decelerating to zero velocity 
		  easeOutQuart: function (t) { return 1-(--t)*t*t*t },
		  // acceleration until halfway, then deceleration
		  easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },
		  // accelerating from zero velocity
		  easeInQuint: function (t) { return t*t*t*t*t },
		  // decelerating to zero velocity
		  easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },
		  // acceleration until halfway, then deceleration 
		  easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }
		}*/

		$(document).ready(function() {
			$el = $('.box');
			/*$('#start').click(function(e) {
				e.preventDefault();
				animateLeft($el);
			});*/
			$('#pause').click(function(e) {
				e.preventDefault();
				stopAnimation($el);
			});
			$('#resume').click(function(e) {
				e.preventDefault();
				resumeAnimation();
			});
		});

		/*function animateLeft(el) {
			var left = 0;
			var currTime = 0;
			var currentTime = Date.now();
			var increase = Math.PI/100;
			var start = 0;
			$('.box').animate(
				{
					textIndent:'100'
				}, 
				{
					duration: 4000,
					step: function(now, fx) {
						console.log('indent: ' + now);
						fx.elem.style.left = left + 'px';
						var time = min(1, (start - now)/-1);
						var easedT = Math.sin(time);
						left += easedT;
						console.log('left: ' + left);
						console.log(time);
					}
				}
				);
		}*/
		function min(a, b){
			return a<b ? a:b;
		}
		function stopAnimation(el) {

		}
		function resumeAnimation() {
			var html = [];
			var counter = 1;
			var increase = Math.PI/100;
			for(i=0; 1<=1; i+=0.01) {
				x = i;
				y = Math.sin(counter);
				var el = '<div class="dot" style="position:absolute; top:' + y + ';left:' + x + ';"></div>';
				html.push(el);
				counter += increase;
			}
			var container = document.getElementById('container');
			container.innerHTML = html.join();
		}
	</script>
</body>
</html>
